{"version":3,"sources":["services/firebase.js","hooks/use-user.js","components/header.js","components/sidebar/user.js","components/sidebar/suggested-profile.js","components/sidebar/suggestions.js","context/logged-in-user.js","components/sidebar/index.js","components/post/header.js","components/post/image.js","components/post/actions.js","components/post/footer.js","components/post/add-comment.js","components/post/comments.js","components/post/index.js","components/timeline.js","hooks/use-photos.js","pages/dashboard.js"],"names":["doesUsernameExist","username","a","firebase","firestore","collection","where","get","result","docs","map","user","data","lenght","getUserByUsername","item","docId","id","getUserByUserId","userId","getSuggestedProfiles","following","limit","filter","profile","includes","updateLoggedInUserFollowing","loggedInUserDocId","profileId","isFollowingProfile","doc","update","FieldValue","arrayRemove","arrayUnion","updateFollowedUserFollowers","profileDocId","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","photosWithUserDetails","getUserPhotosByUsername","isUserFollowingProfile","loggedInUserUsername","profileUserId","response","toggleFollow","activeUserDocId","followingUserId","useUser","useState","activeUser","setActiveUser","useEffect","getUserObjByUserId","Header","loggedInUser","useContext","UserContext","uid","FirebaseContext","history","useHistory","className","to","ROUTES","src","alt","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","type","title","onClick","auth","signOut","push","onKeyDown","event","key","User","fullName","test","count","height","SuggestedProfile","followed","setFollowed","Suggestions","profiles","setProfiles","suggestedProfiles","length","loggedInUserContext","createContext","Sidebar","Image","caption","Actions","totalLikes","likedPhoto","handleFocus","toggleLiked","setToggleLiked","setLikes","handleToggleLiked","tabIndex","Footer","AddComment","comments","setComments","commentInput","comment","setComment","displayName","handleSubmitComment","preventDefault","method","onSubmit","autoComplete","name","placeholder","value","onChange","target","ref","disabled","Comments","allComments","posted","commentsSlice","setCommentsSlice","showNextComments","slice","formatDistance","Date","Post","content","useRef","imageSrc","current","focus","dateCreated","Timeline","LoggedInUserContext","photos","setPhotos","followedUserPhotos","sort","b","getTimelinePhotos","usePhotos","undefined","width","Dashboard","document","Provider"],"mappings":"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","file":"static/js/7.3eca7048.chunk.js","sourcesContent":["import { firebase, FieldValue } from '../lib/firebase';\r\n\r\nexport async function doesUsernameExist(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', username)\r\n    .get();\r\n\r\n  return result.docs.map((user) => user.data().lenght > 0);\r\n}\r\n\r\nexport async function getUserByUsername(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', username)\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n}\r\n// get user from the firestore where userId === userId (passed from the auth)\r\nexport async function getUserByUserId(userId) {\r\n  const result = await firebase.firestore().collection('users').where('userId', '==', userId).get();\r\n  const user = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n\r\n  return user;\r\n}\r\n\r\nexport async function getSuggestedProfiles(userId, following) {\r\n  const result = await firebase.firestore().collection('users').limit(10).get();\r\n\r\n  return result.docs\r\n    .map((user) => ({ ...user.data(), docId: user.id }))\r\n    .filter((profile) => profile.userId !== userId && !following.includes(profile.userId));\r\n}\r\n\r\n// updateLoggedInUserFollowing, updateFollowedUserFollowers\r\n\r\nexport async function updateLoggedInUserFollowing(\r\n  loggedInUserDocId, // currently logged in user document id (karl's profile)\r\n  profileId, // the user that karl request to follow\r\n  isFollowingProfile // true/false (am i currently following this person?)\r\n) {\r\n  return firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .doc(loggedInUserDocId)\r\n    .update({\r\n      following: isFollowingProfile\r\n        ? FieldValue.arrayRemove(profileId)\r\n        : FieldValue.arrayUnion(profileId)\r\n    });\r\n}\r\n\r\nexport async function updateFollowedUserFollowers(\r\n  profileDocId, // currently logged in user document id (karl's profile)\r\n  loggedInUserDocId, // the user that karl request to follow\r\n  isFollowingProfile // true/false (am i currently following this person?)\r\n) {\r\n  return firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .doc(profileDocId)\r\n    .update({\r\n      followers: isFollowingProfile\r\n        ? FieldValue.arrayRemove(loggedInUserDocId)\r\n        : FieldValue.arrayUnion(loggedInUserDocId)\r\n    });\r\n}\r\n\r\nexport async function getPhotos(userId, following) {\r\n  // [5,4,2] => following\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('userId', 'in', following)\r\n    .get();\r\n\r\n  const userFollowedPhotos = result.docs.map((photo) => ({\r\n    ...photo.data(),\r\n    docId: photo.id\r\n  }));\r\n\r\n  const photosWithUserDetails = await Promise.all(\r\n    userFollowedPhotos.map(async (photo) => {\r\n      let userLikedPhoto = false;\r\n      if (photo.likes.includes(userId)) {\r\n        userLikedPhoto = true;\r\n      }\r\n      // photo.userId = 2\r\n      const user = await getUserByUserId(photo.userId);\r\n      // raphael\r\n      const { username } = user[0];\r\n      return { username, ...photo, userLikedPhoto };\r\n    })\r\n  );\r\n\r\n  return photosWithUserDetails;\r\n}\r\n\r\nexport async function getUserPhotosByUsername(username) {\r\n  const [user] = await getUserByUsername(username);\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('photos')\r\n    .where('userId', '==', user.userId)\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n}\r\n\r\nexport async function isUserFollowingProfile(loggedInUserUsername, profileUserId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection('users')\r\n    .where('username', '==', loggedInUserUsername) // karl (active logged in user)\r\n    .where('following', 'array-contains', profileUserId)\r\n    .get();\r\n\r\n  const [response = {}] = result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id\r\n  }));\r\n\r\n  return response.userId;\r\n}\r\n\r\nexport async function toggleFollow(\r\n  isFollowingProfile,\r\n  activeUserDocId,\r\n  profileDocId,\r\n  profileUserId,\r\n  followingUserId\r\n) {\r\n  // 1st param: karl's doc id\r\n  // 2nd param: raphael's user id\r\n  // 3rd param: is the user following this profile? e.g does karl follow raphael? (true/false)\r\n  await updateLoggedInUserFollowing(activeUserDocId, profileUserId, isFollowingProfile);\r\n\r\n  // 1st param: karl's user id\r\n  // 2nd param: raphael's doc id\r\n  // 3rd param: is the user following this profile? e.g does karl follow raphael? (true/false)\r\n  await updateFollowedUserFollowers(profileDocId, followingUserId, isFollowingProfile);\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { getUserByUserId } from '../services/firebase';\r\n\r\nexport default function useUser(userId) {\r\n  const [activeUser, setActiveUser] = useState({});\r\n\r\n  useEffect(() => {\r\n    async function getUserObjByUserId(userId) {\r\n      // we need a function that we can call (firebase service) that gets the user data based on the id\r\n      const [user] = await getUserByUserId(userId);\r\n      setActiveUser(user || {});\r\n    }\r\n    if (userId) {\r\n      getUserObjByUserId(userId);\r\n    }\r\n  }, [userId]);\r\n\r\n  return { user: activeUser };\r\n}\r\n","import { useContext } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport FirebaseContext from '../context/firebase';\r\nimport UserContext from '../context/user';\r\nimport * as ROUTES from '../constants/routes';\r\nimport useUser from '../hooks/use-user';\r\n\r\nexport default function Header() {\r\n  const { user: loggedInUser } = useContext(UserContext);\r\n  const { user } = useUser(loggedInUser?.uid);\r\n  const { firebase } = useContext(FirebaseContext);\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <header className=\"h-16 bg-white border-b border-gray-primary mb-8\">\r\n      <div className=\"container mx-auto max-w-screen-lg h-full\">\r\n        <div className=\"flex justify between h-full\">\r\n          <div className=\"text-gray-700 text-center flex items-center align-items cursor-pointer\">\r\n            <h1 className=\"flex justify-center w-full\">\r\n              <Link to={ROUTES.DASHBOARD} aria-label=\"Instagram logo\">\r\n                <img src=\"/images/logo.png\" alt=\"Instagram\" className=\"mt-2 w-6/12\" />\r\n              </Link>\r\n            </h1>\r\n          </div>\r\n          <div className=\"text-gray-700 text-center flex items-center align-items\">\r\n            {user.username ? (\r\n              <>\r\n                <Link to={ROUTES.DASHBOARD} aria-label=\"Dashboard\">\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\r\n                    />\r\n                  </svg>\r\n                </Link>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  title=\"Sign Out\"\r\n                  onClick={() => {\r\n                    firebase.auth().signOut();\r\n                    history.push(ROUTES.LOGIN);\r\n                  }}\r\n                  onKeyDown={(event) => {\r\n                    if (event.key === 'Enter') {\r\n                      firebase.auth().signOut();\r\n                      history.push(ROUTES.LOGIN);\r\n                    }\r\n                  }}\r\n                >\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n                <div className=\"flex items-center cursor-pointer\">\r\n                  <Link to={`/p/${user?.username}`}>\r\n                    <img\r\n                      className=\"rounded-full h-8 w-8 flex\"\r\n                      src={`/images/avatars/${user.username}.jpg`}\r\n                      alt={`${user?.username} profile `}\r\n                    />\r\n                  </Link>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Link to={ROUTES.LOGIN}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\r\n                  >\r\n                    Log In\r\n                  </button>\r\n                </Link>\r\n                <Link to={ROUTES.SIGN_UP}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"font-bol text-sm rounded text-blue-medium w-20 h-8\"\r\n                  >\r\n                    Sign Up\r\n                  </button>\r\n                </Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport Skeleton from 'react-loading-skeleton';\r\n\r\nexport default function User({ username, fullName, test }) {\r\n  return !username || !fullName ? (\r\n    <Skeleton count={1} height={61} />\r\n  ) : (\r\n    <Link to={`/p/${username}`} className=\"grid grid-cols-4 gap-4 mb-6 items-center\">\r\n      <div className=\"flex items-center justify-between col-span-1\">\r\n        {test}\r\n        <img\r\n          className=\"rounded-full w-16 flex mr-3\"\r\n          src={`/images/avatars/${username}.jpg`}\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n      <div className=\"col-span-3\">\r\n        <p className=\"font-bold text-sm\">{username}</p>\r\n        <p className=\"text-sm\">{fullName}</p>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nUser.propTypes = {\r\n  username: PropTypes.string,\r\n  fullName: PropTypes.string,\r\n  test: PropTypes.number\r\n};\r\n","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport { updateLoggedInUserFollowing, updateFollowedUserFollowers } from '../../services/firebase';\r\n\r\nexport default function SuggestedProfile({\r\n  profileDocId,\r\n  username,\r\n  profileId,\r\n  userId,\r\n  loggedInUserDocId\r\n}) {\r\n  const [followed, setFollowed] = useState(false);\r\n\r\n  async function handleFollowUser() {\r\n    setFollowed(true);\r\n\r\n    await updateLoggedInUserFollowing(loggedInUserDocId, profileId, false);\r\n    await updateFollowedUserFollowers(profileDocId, userId, false);\r\n  }\r\n\r\n  return !followed ? (\r\n    <div className=\"flex flex-row items-center alin-items justify-between\">\r\n      <div className=\"flex items-center justify=between\">\r\n        <img\r\n          className=\"rounded-full w-8 flex mr-3\"\r\n          src={`/images/avatars/${username}.jpg`}\r\n          alt=\"\"\r\n        />\r\n        <Link to={`/p/${username}`}>\r\n          <p className=\"font-bold text-sm\">{username}</p>\r\n        </Link>\r\n      </div>\r\n      <button\r\n        className=\"text-xs font-bold text-blue-medium\"\r\n        type=\"button\"\r\n        onClick={handleFollowUser}\r\n      >\r\n        Follow\r\n      </button>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nSuggestedProfile.propTypes = {\r\n  profileDocId: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n  profileId: PropTypes.string.isRequired,\r\n  userId: PropTypes.string.isRequired,\r\n  loggedInUserDocId: PropTypes.string.isRequired\r\n};\r\n","/* eslint-disable no-nested-ternary */\r\nimport { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport { getSuggestedProfiles } from '../../services/firebase';\r\nimport SuggestedProfile from './suggested-profile';\r\n\r\nexport default function Suggestions({ userId, following, loggedInUserDocId }) {\r\n  const [profiles, setProfiles] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function suggestedProfiles() {\r\n      const response = await getSuggestedProfiles(userId, following);\r\n      setProfiles(response);\r\n    }\r\n\r\n    if (userId) {\r\n      suggestedProfiles();\r\n    }\r\n  }, [userId]);\r\n  // hint: use the firebase service (call using userId)\r\n  // getSuggestedProfiles\r\n  // call the async function ^^^^ within useEffect\r\n  // store it in state\r\n  // go ahead and render(wait on the profiles as in 'skeleton')\r\n\r\n  return !profiles ? (\r\n    <Skeleton count={1} height={150} className=\"mt-5\" />\r\n  ) : profiles.length > 0 ? (\r\n    <div className=\"rounded flex flex-col\">\r\n      <div className=\"text-sm flex items-center align-items justify-between mb-2\">\r\n        <p className=\"font-bold text-gray-base\">Suggestions for you</p>\r\n      </div>\r\n      <div className=\"mt-4 grid gap-5\">\r\n        {profiles.map((profile) => (\r\n          <SuggestedProfile\r\n            key={profile.docId}\r\n            profileDocId={profile.docId}\r\n            username={profile.username}\r\n            profileId={profile.userId}\r\n            userId={userId}\r\n            loggedInUserDocId={loggedInUserDocId}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nSuggestions.propTypes = {\r\n  userId: PropTypes.string,\r\n  following: PropTypes.array,\r\n  loggedInUserDocId: PropTypes.string\r\n};\r\n","import { createContext } from 'react';\r\n\r\nconst loggedInUserContext = createContext(null);\r\nexport default loggedInUserContext;\r\n","import React, { useContext } from 'react';\r\nimport User from './user';\r\nimport Suggestions from './suggestions';\r\nimport loggedInUserContext from '../../context/logged-in-user';\r\n\r\nexport default function Sidebar() {\r\n  const { user: { docId = '', fullName, username, userId, following } = {} } =\r\n    useContext(loggedInUserContext);\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <User username={username} fullName={fullName} />\r\n      <Suggestions userId={userId} following={following} loggedInUserDocId={docId} />\r\n    </div>\r\n  );\r\n}\r\n","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Header({ username }) {\r\n  return (\r\n    <div className=\"flex border-b border-gray-primary h-4 p-4 py-8\">\r\n      <div className=\"flex items-center\">\r\n        <Link to={`/p/${username}`} className=\"flex items-center\">\r\n          <img\r\n            className=\"rounded-full h-8 w-8 flex mr-3\"\r\n            src={`/images/avatars/${username}.jpg`}\r\n            alt={`${username} profile picture`}\r\n          />\r\n          <p className=\"font-bold\">{username}</p>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  username: PropTypes.string.isRequired\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default function Image({ src, caption }) {\r\n  return <img src={src} alt={caption} />;\r\n}\r\n\r\nImage.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  caption: PropTypes.string.isRequired\r\n};\r\n","import { useState, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FirebaseContext from '../../context/firebase';\r\nimport UserContext from '../../context/user';\r\n\r\nexport default function Actions({ docId, totalLikes, likedPhoto, handleFocus }) {\r\n  const {\r\n    user: { uid: userId }\r\n  } = useContext(UserContext);\r\n  const [toggleLiked, setToggleLiked] = useState(likedPhoto);\r\n  const [likes, setLikes] = useState(totalLikes);\r\n  const { firebase, FieldValue } = useContext(FirebaseContext);\r\n\r\n  const handleToggleLiked = async () => {\r\n    setToggleLiked((toggleLiked) => !toggleLiked);\r\n\r\n    await firebase\r\n      .firestore()\r\n      .collection('photos')\r\n      .doc(docId)\r\n      .update({\r\n        likes: toggleLiked ? FieldValue.arrayRemove(userId) : FieldValue.arrayUnion(userId)\r\n      });\r\n\r\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between p-4\">\r\n        <div className=\"flex\">\r\n          <svg\r\n            onClick={handleToggleLiked}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                handleToggleLiked();\r\n              }\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n            className={`w-8 mr-4 select-none curosr-pointer ${\r\n              toggleLiked ? 'fill-red text-red-primary' : 'text-black-light'\r\n            }`}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n            />\r\n          </svg>\r\n          <svg\r\n            onClick={handleFocus}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                handleFocus();\r\n              }\r\n            }}\r\n            className=\"w-8 text-black-light select-none cursor-pointer focus:outline-none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 py-0\">\r\n        <p className=\"font-bold\">{likes === 1 ? `${likes} like` : `${likes} likes`}</p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nActions.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  totalLikes: PropTypes.number.isRequired,\r\n  likedPhoto: PropTypes.bool.isRequired,\r\n  handleFocus: PropTypes.func.isRequired\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default function Footer({ caption, username }) {\r\n  return (\r\n    <div className=\"p-4 pt-2 pb-0\">\r\n      <span className=\"mr-1 font-bold\">{username}</span>\r\n      <span>{caption}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nFooter.propTypes = {\r\n  caption: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired\r\n};\r\n","import { useState, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport UserContext from '../../context/user';\r\nimport FirebaseContext from '../../context/firebase';\r\n\r\nexport default function AddComment({ docId, comments, setComments, commentInput }) {\r\n  const [comment, setComment] = useState('');\r\n  const { firebase, FieldValue } = useContext(FirebaseContext);\r\n  const {\r\n    user: { displayName }\r\n  } = useContext(UserContext);\r\n\r\n  const handleSubmitComment = (event) => {\r\n    event.preventDefault();\r\n\r\n    setComments([...comments], { displayName, comment });\r\n    setComments('');\r\n    return firebase\r\n      .firestore()\r\n      .collection('photos')\r\n      .doc(docId)\r\n      .update({\r\n        comments: FieldValue.arrayUnion({ displayName, comment })\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"border-t border-gray-primary\">\r\n      <form\r\n        className=\"flex justify-between pl-0 pr-5\"\r\n        method=\"POST\"\r\n        onSubmit={(event) =>\r\n          comment.length >= 1 ? handleSubmitComment(event) : event.preventDefault()\r\n        }\r\n      >\r\n        <input\r\n          aria-label=\"Add a comment\"\r\n          autoComplete=\"off\"\r\n          className=\"text-sm textgray-base w-full mr-3 py-5 px-4\"\r\n          type=\"text\"\r\n          name=\"add-comment\"\r\n          placeholder=\"Add a comment...\"\r\n          value={comment}\r\n          onChange={({ target }) => setComment(target.value)}\r\n          ref={commentInput}\r\n        />\r\n        <button\r\n          className={`text-sm font-bold text-blue-medium ${!comment && 'opacity-25'}`}\r\n          type=\"button\"\r\n          disabled={comment.length < 1}\r\n          onClick={handleSubmitComment}\r\n        >\r\n          Post\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nAddComment.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  setComments: PropTypes.func.isRequired,\r\n  commentInput: PropTypes.object\r\n};\r\n","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { formatDistance } from 'date-fns';\r\nimport { Link } from 'react-router-dom';\r\nimport AddComment from './add-comment';\r\n\r\nexport default function Comments({ docId, comments: allComments, posted, commentInput }) {\r\n  const [comments, setComments] = useState(allComments);\r\n  const [commentsSlice, setCommentsSlice] = useState(3);\r\n\r\n  const showNextComments = () => {\r\n    setCommentsSlice(commentsSlice + 3);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-4 pt-1 pb-4\">\r\n        {comments.slice(0, commentsSlice).map((item) => (\r\n          <p key={`${item.comment}-${item.displayName}`} className=\"mb-1\">\r\n            <Link to={`/p/${item.displayName}`}>\r\n              <span className=\"mr-1 font-bold\">{item.displayName}</span>\r\n            </Link>\r\n            <span>{item.comment}</span>\r\n          </p>\r\n        ))}\r\n        {comments.length >= 3 && commentsSlice < comments.length && (\r\n          <button\r\n            className=\"text-sm text-gray-base mb-1 cursor-pointer\"\r\n            type=\"button\"\r\n            onClick={showNextComments}\r\n            onKeyDown={(event) => {\r\n              if (event.key === 'Enter') {\r\n                showNextComments();\r\n              }\r\n            }}\r\n          >\r\n            View all comments\r\n          </button>\r\n        )}\r\n        <p className=\"text-gray-base uppercase text-xs mt-2\">\r\n          {formatDistance(posted, new Date())} ago\r\n        </p>\r\n      </div>\r\n      <AddComment\r\n        docId={docId}\r\n        comments={comments}\r\n        setComments={setComments}\r\n        commentInput={commentInput}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nComments.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  posted: PropTypes.number.isRequired,\r\n  commentInput: PropTypes.object.isRequired\r\n};\r\n","import { useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Header from './header';\r\nimport Image from './image';\r\nimport Actions from './actions';\r\nimport Footer from './footer';\r\nimport Comments from './comments';\r\n\r\nexport default function Post({ content }) {\r\n  const commentInput = useRef(null);\r\n\r\n  const handleFocus = () => commentInput.current.focus();\r\n  // components\r\n  // -> header, image, actions (like & comment icons), footer, comments\r\n  return (\r\n    <div className=\"rounded col-span-4 border bg-white border-gray-primary mb-8\">\r\n      <Header username={content.username} />\r\n      <Image src={content.imageSrc} caption={content.caption} />\r\n      <Actions\r\n        docId={content.docId}\r\n        totalLikes={content.likes.length}\r\n        likedPhoto={content.userLikedPhoto}\r\n        handleFocus={handleFocus}\r\n      />\r\n      <Footer caption={content.caption} username={content.username} />\r\n      <Comments\r\n        docId={content.docId}\r\n        comments={content.comments}\r\n        posted={content.dateCreated}\r\n        commentInput={commentInput}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nPost.propTypes = {\r\n  content: PropTypes.shape({\r\n    username: PropTypes.string.isRequired,\r\n    imageSrc: PropTypes.string.isRequired,\r\n    caption: PropTypes.string.isRequired,\r\n    docId: PropTypes.string.isRequired,\r\n    userLikedPhoto: PropTypes.bool.isRequired,\r\n    likes: PropTypes.array.isRequired,\r\n    comments: PropTypes.array.isRequired,\r\n    dateCreated: PropTypes.number.isRequired\r\n  })\r\n};\r\n","/* eslint-disable no-nested-ternary */\r\nimport { useContext } from 'react';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport LoggedInUserContext from '../context/logged-in-user';\r\nimport usePhotos from '../hooks/use-photos';\r\nimport Post from './post';\r\n\r\nexport default function Timeline() {\r\n  const { user } = useContext(LoggedInUserContext);\r\n\r\n  const { user: { following } = {} } = useContext(LoggedInUserContext);\r\n\r\n  const { photos } = usePhotos(user);\r\n\r\n  return (\r\n    <div className=\"container col-span-2\">\r\n      {following === undefined ? (\r\n        <Skeleton count={2} width={640} height={500} className=\"mb-5\" />\r\n      ) : following.length === 0 ? (\r\n        <p className=\"flex justify-center font-bold\">Follow other people to see Photos</p>\r\n      ) : photos ? (\r\n        photos.map((content) => <Post key={content.docId} content={content} />)\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { getPhotos } from '../services/firebase';\r\n\r\nexport default function usePhotos(user) {\r\n  const [photos, setPhotos] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function getTimelinePhotos() {\r\n      // does the user actually follow people?\r\n      if (user?.following?.length > 0) {\r\n        const followedUserPhotos = await getPhotos(user.userId, user.following);\r\n        // re-arrange array to be newest photos forst by dateCreated\r\n        followedUserPhotos.sort((a, b) => b.dateCreated - a.dateCreated);\r\n        setPhotos(followedUserPhotos);\r\n      }\r\n    }\r\n\r\n    getTimelinePhotos();\r\n  }, [user?.userId]);\r\n\r\n  return { photos };\r\n}\r\n","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Header from '../components/header';\r\nimport Sidebar from '../components/sidebar';\r\nimport Timeline from '../components/timeline';\r\nimport useUser from '../hooks/use-user';\r\nimport loggedInUserContext from '../context/logged-in-user';\r\n\r\nexport default function Dashboard({ user: loggedInUser }) {\r\n  const { user } = useUser(loggedInUser.uid);\r\n  useEffect(() => {\r\n    document.title = 'Instagram';\r\n  }, []);\r\n\r\n  return (\r\n    <loggedInUserContext.Provider value={{ user }}>\r\n      <div className=\"bg-gray-background\">\r\n        <Header />\r\n        <div className=\"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\">\r\n          <Timeline />\r\n          <Sidebar />\r\n        </div>\r\n      </div>\r\n    </loggedInUserContext.Provider>\r\n  );\r\n}\r\n\r\nDashboard.propTypes = {\r\n  user: PropTypes.object.isRequired\r\n};\r\n"],"sourceRoot":""}